---
/**
 * Home: Video hero, carousel (products + poetry), featured grid, CTA.
 * Apple-inspired polish — breathing space, vertical rhythm, subtle shadows.
 */
import BaseLayout from '../layouts/BaseLayout.astro';
import FeaturedCollections from '../components/home/FeaturedCollections';
import Carousel from '../components/Carousel';
import VideoHero from '../components/VideoHero';
import products from '../data/products.json';

const featured = products.filter((p) => p.featured);

// Carousel: mix poetry slides + featured products (minimal indicators)
const carouselSlides = [
  {
    type: 'poetry',
    id: 'p1',
    urdu: 'آداب پہنیے — الفاظ کو پہن کر چلو',
    transliteration: 'Adab pehniye — wear the words.',
  },
  ...featured.slice(0, 2).map((p) => ({
    type: 'product' as const,
    id: p.id,
    name: p.name,
    slug: p.slug,
    price: p.price,
    currency: p.currency,
    image: p.image,
  })),
  {
    type: 'poetry',
    id: 'p2',
    urdu: 'الفاظ سے پہلے آداب سیکھو',
    transliteration: 'Before words, learn adab.',
  },
  ...featured.slice(2, 4).map((p) => ({
    type: 'product' as const,
    id: p.id,
    name: p.name,
    slug: p.slug,
    price: p.price,
    currency: p.currency,
    image: p.image,
  })),
];
---

<BaseLayout title="Adab — Wear the Words" description="Urdu & Adabi inspired streetwear. Poetry on fabric.">
  <!-- Cinematic hero: add src + poster for video (e.g. /videos/hero.mp4); omit for gradient + Urdu line. -->
  <VideoHero
    client:load
    overlayText="آداب پہنیے — الفاظ کو پہن کر چلو"
    overlaySubtext="Wear the words. Poetry on fabric."
    mobileFallback={true}
  />

  <!-- CTA below hero -->
  <div class="flex justify-center py-8 md:py-10">
    <a
      href="/shop"
      class="inline-block px-8 py-3 bg-ink dark:bg-cream text-cream dark:text-ink font-medium rounded-lg hover:opacity-90 transition-opacity duration-300 focus:outline-none focus:ring-2 focus:ring-emerald/50 focus:ring-offset-2 focus:ring-offset-cream dark:focus:ring-offset-ink shadow-soft"
    >
      Adab Pehniye
    </a>
  </div>

  <!-- Carousel: featured products + poetry statements -->
  <section class="py-18 md:py-24 px-4 sm:px-6 border-t border-sand/60 dark:border-charcoal-light/50">
    <div class="max-w-5xl mx-auto">
      <h2 class="sr-only">Featured & poetry</h2>
      <Carousel client:load slides={carouselSlides} />
    </div>
  </section>

  <!-- Featured grid – strong vertical rhythm -->
  <section class="py-22 md:py-30 px-4 sm:px-6 bg-cream dark:bg-ink border-t border-sand/60 dark:border-charcoal-light/50">
    <div class="max-w-6xl mx-auto">
      <h2 class="font-display text-2xl md:text-3xl text-ink dark:text-cream text-center mb-16">
        Featured
      </h2>
      <FeaturedCollections products={featured} client:load />
    </div>
  </section>

  <!-- Secondary CTA – understated -->
  <section class="py-22 md:py-30 px-4 sm:px-6 bg-sand/40 dark:bg-charcoal/40">
    <div class="max-w-2xl mx-auto text-center">
      <p class="font-display text-xl md:text-2xl text-charcoal dark:text-cream/90">
        From mushaira to street — wear the verse.
      </p>
      <a
        href="/about"
        class="inline-block mt-8 text-emerald hover:text-emerald-light font-medium transition-colors duration-300"
      >
        Our story →
      </a>
    </div>
  </section>
</BaseLayout>
